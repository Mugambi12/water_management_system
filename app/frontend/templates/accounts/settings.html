{% extends 'base.html' %} {% block content %}

<head>
  <style>
    .form-control {
      min-width: 150px;
    }
  </style>
</head>

<section class="container-fluid p-3">
  <div class="row">
    <!-- Nav Pills -->
    <div class="col-3 border-end">
      <div class="d-flex flex-column vh-75 p-3 bg-light rounded">
        <!-- Company Logo -->
        <div class="mb-auto text-center">
          <img
            src="https://via.placeholder.com/150x150.png"
            class="rounded-circle profile-image mb-3 border border-4 border-white"
            alt="Profile Image"
            width="150"
            height="150"
          />
          <h4 class="company-name mb-4">Company Name</h4>
        </div>

        <!-- Navigation Links -->
        <ul class="nav nav-pills flex-column mb-auto">
          <li class="nav-item mb-2">
            <a
              class="nav-link active"
              id="tab1"
              data-bs-toggle="pill"
              href="#content1"
              >Company Information</a
            >
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link" id="tab2" data-bs-toggle="pill" href="#content2"
              >Services Settings</a
            >
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link" id="tab3" data-bs-toggle="pill" href="#content3"
              >Payment Methods</a
            >
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link" id="tab4" data-bs-toggle="pill" href="#content4"
              >Mail Settings</a
            >
          </li>
          <li class="nav-item mb-2">
            <a class="nav-link" id="tab5" data-bs-toggle="pill" href="#content5"
              >Social Accounts</a
            >
          </li>
        </ul>
      </div>
    </div>

    <!-- Tab Pane -->
    <div class="col-9">
      <div class="tab-content">
        <!-- Company Information -->
        <div class="tab-pane fade show active" id="content1">
          <div class="text-center">
            <h3 class="fw-bold mt-3 mb-2 text-success">Company Information</h3>
            <p class="text-muted fst-italic">
              Please provide the following details:
            </p>
          </div>

          <div class="container">
            <form
              method="post"
              action="{{ url_for('accounts.settings.settings') }}"
              id="company_name_form"
              enctype="multipart/form-data"
            >
              <!-- CSRF Token -->
              <input
                type="hidden"
                name="csrf_token"
                value="{{ csrf_token() }}"
              />
              <div class="row">
                <!-- Company Logo -->
                <div class="col-md-6 mb-3">
                  {{ company_name_form.company_logo.label(class="form-label") }}
                  <div class="input-group">
                    <input
                      type="file"
                      class="form-control"
                      id="company_logo"
                      name="company_logo"
                    />
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  {{ company_name_form.company_name.label(class="form-label") }}
                  {{ company_name_form.company_name(class="form-control
                  form-control-sm") }}
                </div>

                <div class="col-md-6 mb-3">
                  {{ company_name_form.company_address.label(class="form-label")
                  }} {{ company_name_form.company_address(class="form-control
                  form-control-sm") }}
                </div>

                <div class="col-md-6 mb-3">
                  {{ company_name_form.company_email.label(class="form-label")
                  }} {{ company_name_form.company_email(class="form-control
                  form-control-sm") }}
                </div>

                <div class="col-md-6 mb-3">
                  {{ company_name_form.contact_number.label(class="form-label")
                  }} {{ company_name_form.contact_number(class="form-control
                  form-control-sm") }}
                </div>

                <div class="col-md-6 mb-3">
                  {{
                  company_name_form.company_website_url.label(class="form-label")
                  }} {{
                  company_name_form.company_website_url(class="form-control
                  form-control-sm") }}
                </div>
              </div>
              <div class="mb-4">
                {{
                company_name_form.company_description.label(class="form-label")
                }} {{ company_name_form.company_description(class="form-control
                form-control-sm") }}
              </div>

              <button
                type="submit"
                name="company_information_submit"
                form="company_name_form"
                class="btn btn-primary rounded-pill"
              >
                Update
              </button>
            </form>
          </div>
        </div>

        <!-- Services Settings -->
        <div class="tab-pane fade" id="content2">
          <div class="text-center">
            <h3 class="fw-bold mt-3 mb-2 text-success">Services Settings</h3>
            <p class="text-muted fst-italic">Content for Services Settings.</p>
          </div>

          <div class="container-fluid p-3">
            <div class="row p-3">
              <div class="mb-3 row">
                <label for="unit_price" class="form-label col-sm-2"
                  >Unit Price</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="unit_price_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      <!-- Input field for unit price with placeholder -->
                      {{ unit_price_form.unit_price(class="form-control
                      form-control-sm", placeholder="Enter unit price") }}

                      <button
                        type="submit"
                        name="unit_price_submit"
                        form="unit_price_form"
                        class="btn btn-outline-primary"
                      >
                        Update
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div class="mb-3 row">
                <label for="service_fee" class="form-label col-sm-2"
                  >Service Fee</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="service_fee_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      <!-- Input field for service fee with placeholder -->
                      {{ service_fee_form.service_fee(class="form-control
                      form-control-sm", placeholder="Enter service fee") }}

                      <button
                        type="submit"
                        name="service_fee_submit"
                        form="service_fee_form"
                        class="btn btn-outline-primary"
                      >
                        Update
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div class="mb-3 row">
                <label for="house_section" class="form-label col-sm-2"
                  >Add House Section</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="add_section_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      <!-- Input field for adding a new house section -->
                      {{ add_section_form.house_sections(class="form-control
                      form-control-sm", placeholder="New section name") }}

                      <button
                        type="submit"
                        name="add_section_submit"
                        form="add_section_form"
                        class="btn btn-outline-success"
                      >
                        Create
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div class="mb-3 row">
                <label for="house_section" class="form-label col-sm-2"
                  >Edit House Section</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="edit_section_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      <!-- Input field for selecting existing house sections -->
                      {{ edit_section_form.house_sections(class="form-control
                      form-control-sm me-3", placeholder="Select section") }}

                      <!-- Input field for entering new house section name -->
                      {{ edit_section_form.new_house_section(class="form-control
                      form-control-sm", placeholder="New section name") }}

                      <button
                        type="submit"
                        name="edit_section_submit"
                        form="edit_section_form"
                        class="btn btn-outline-primary"
                      >
                        Update
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div class="mb-3 row">
                <label for="house_section" class="form-label col-sm-2"
                  >Delete House Section</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="delete_section_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      <!-- Input field for selecting house section to delete -->
                      {{ delete_section_form.house_sections(class="form-control
                      form-control-sm", placeholder="Select section to delete")
                      }}

                      <button
                        type="button"
                        class="btn btn-outline-danger"
                        data-bs-toggle="modal"
                        data-bs-target="#confirmDeleteModal"
                      >
                        Delete
                      </button>

                      <!-- Modal -->
                      <div
                        class="modal fade"
                        id="confirmDeleteModal"
                        tabindex="-1"
                        aria-labelledby="confirmDeleteModalLabel"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5
                                class="modal-title"
                                id="confirmDeleteModalLabel"
                              >
                                Confirm Deletion
                              </h5>
                              <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"
                              ></button>
                            </div>
                            <div class="modal-body">
                              Are you sure you want to delete this section?
                            </div>
                            <div
                              class="modal-footer justify-content-md-between"
                            >
                              <button
                                type="button"
                                class="btn btn-secondary"
                                data-bs-dismiss="modal"
                              >
                                Cancel
                              </button>
                              <button
                                type="submit"
                                name="delete_section_submit"
                                form="delete_section_form"
                                class="btn btn-danger"
                              >
                                Delete
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Payment Methods -->
        <div class="tab-pane fade" id="content3">
          <div class="text-center">
            <h3 class="fw-bold mt-3 mb-2 text-success">Payment Methods</h3>
            <p class="text-muted fst-italic">Content for Payment Methods.</p>
          </div>

          <div class="container-fluid">
            <div class="row p-3">
              <div class="mb-3 row">
                <label for="bank_name" class="form-label col-sm-2"
                  >Bank Name</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="bank_name_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      {{ bank_name_form.bank_name(class="form-control
                      form-control-sm", placeholder="Enter Bank Name") }}

                      <button
                        type="submit"
                        name="bank_name_submit"
                        form="bank_name_form"
                        class="btn btn-outline-primary"
                      >
                        Update
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div class="mb-3 row">
                <label for="paybill_number" class="form-label col-sm-2"
                  >PayBill Number</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="paybill_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      {{ paybill_form.paybill(class="form-control
                      form-control-sm", placeholder="Enter PayBill number") }}

                      <button
                        type="submit"
                        name="paybill_submit"
                        form="paybill_form"
                        class="btn btn-outline-primary"
                      >
                        Update
                      </button>
                    </div>
                  </form>
                </div>
              </div>

              <div class="mb-3 row">
                <label for="account_number" class="form-label col-sm-2"
                  >Account Number</label
                >
                <div class="col-sm-10">
                  <form
                    method="post"
                    action="{{ url_for('accounts.settings.settings') }}"
                    id="account_number_form"
                  >
                    <div class="input-group">
                      <!-- CSRF Token -->
                      <input
                        type="hidden"
                        name="csrf_token"
                        value="{{ csrf_token() }}"
                      />
                      <!-- Input field for accont number with placeholder -->
                      {{ account_number_form.account_number(class="form-control
                      form-control-sm", placeholder="Enter Account Number") }}

                      <button
                        type="submit"
                        name="account_number_submit"
                        form="account_number_form"
                        class="btn btn-outline-primary"
                      >
                        Update
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mail Settings -->
        <div class="tab-pane fade" id="content4">
          <div class="text-center">
            <h3 class="fw-bold mt-3 mb-2 text-success">Mail Settings</h3>
            <p class="text-muted fst-italic">Content for Mail Settings.</p>
          </div>

          <div class="row">
            <div class="mb-3">
              <label for="companyEmail" class="form-label">Company Email</label>
              <input
                type="text"
                class="form-control"
                id="companyEmail"
                placeholder="Enter company email"
              />
            </div>

            <div class="mb-3">
              <label for="companySendingEmail" class="form-label"
                >Company Sending Email</label
              >
              <input
                type="text"
                class="form-control"
                id="companySendingEmail"
                placeholder="Enter company sending email"
              />
            </div>

            <div class="mb-3">
              <label for="companyEmailPassword" class="form-label"
                >Company Email Password</label
              >
              <input
                type="password"
                class="form-control"
                id="companyEmailPassword"
                placeholder="Enter company email password"
              />
            </div>
          </div>
        </div>

        <!-- Social Accounts -->
        <div class="tab-pane fade" id="content5">
          <div class="text-center">
            <h3 class="fw-bold mt-3 mb-2 text-success">Social Accounts</h3>
            <p class="text-muted fst-italic">
              Optimize your system configuration with ease.
            </p>
          </div>

          <div class="text-center">
            <div class="social-icons mb-4">
              <a href="#" class="social-icon btn btn-success">
                <ion-icon name="logo-whatsapp"></ion-icon> WhatsApp
              </a>
              <a href="#" class="social-icon btn btn-primary">
                <ion-icon name="logo-facebook"></ion-icon> Facebook
              </a>
              <a href="#" class="social-icon btn btn-dark">
                <ion-icon name="logo-twitter"></ion-icon> Twitter
              </a>
              <a href="#" class="social-icon btn btn-danger">
                <ion-icon name="logo-instagram"></ion-icon> Instagram
              </a>
              <a href="#" class="social-icon btn btn-dark">
                <ion-icon name="logo-tiktok"></ion-icon> TikTok
              </a>
              <a href="#" class="social-icon btn btn-info">
                <ion-icon name="logo-linkedin"></ion-icon> Linkedin
              </a>
            </div>
          </div>

          <div class="container">
            <div class="row p-3">
              <div class="col-sm-10">
                <div class="mb-3 row">
                  <label for="whatsapp" class="form-label col-sm-2"
                    >WhatsApp</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="whatsapp"
                      placeholder="Enter WhatsApp URL"
                    />
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="facebook" class="form-label col-sm-2"
                    >Facebook</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="facebook"
                      placeholder="Enter Facebook URL"
                    />
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="twitter" class="form-label col-sm-2"
                    >Twitter</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="twitter"
                      placeholder="Enter Twitter URL"
                    />
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="instagram" class="form-label col-sm-2"
                    >Instagram</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="instagram"
                      placeholder="Enter Instagram URL"
                    />
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="tiktok" class="form-label col-sm-2">TikTok</label>
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="tiktok"
                      placeholder="Enter TikTok URL"
                    />
                  </div>
                </div>

                <div class="mb-3 row">
                  <label for="linkedin" class="form-label col-sm-2"
                    >Linkedin</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="linkedin"
                      placeholder="Enter Linkedin"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- JavaScript to store active tab in localStorage -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Get all tab links
    const tabLinks = document.querySelectorAll('[data-bs-toggle="pill"]');

    // Function to handle tab click event
    function handleTabClick(event) {
      // Get the ID of the clicked tab
      const tabId = event.target.getAttribute("href").slice(1);

      // Store the ID of the active tab in localStorage
      localStorage.setItem("activeTabId", tabId);
    }

    // Add click event listeners to all tab links
    tabLinks.forEach(function (tabLink) {
      tabLink.addEventListener("click", handleTabClick);
    });

    // Get the ID of the last active tab from localStorage
    const activeTabId = localStorage.getItem("activeTabId");

    // If there's a stored active tab, activate it
    if (activeTabId) {
      const activeTab = document.querySelector(`[href="#${activeTabId}"]`);
      if (activeTab) {
        activeTab.click(); // Programmatically click the tab to activate it
      }
    }
  });
</script>

{% endblock %}
